// Sample TTS website using ElevenLabs API (React + Tailwind CSS)

import { useState } from 'react';
import { Button } from "@/components/ui/button";
import { Textarea } from "@/components/ui/textarea";
import { Input } from "@/components/ui/input";
import { Card, CardContent } from "@/components/ui/card";

export default function TTSDemo() {
  const [text, setText] = useState("");
  const [audioUrl, setAudioUrl] = useState("");
  const [loading, setLoading] = useState(false);

  const handleGenerate = async () => {
    setLoading(true);
    setAudioUrl("");
    const response = await fetch("https://api.elevenlabs.io/v1/text-to-speech/Xb7hH8MSUJpSbSDYk0k2", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "xi-api-key": "sk_75a0af141dc08aa6aa6a6a8d3744d0c2f40de99567bafaf8",
      },
      body: JSON.stringify({
        text: text,
        model_id: "eleven_monolingual_v1",
        voice_settings: {
          stability: 0.5,
          similarity_boost: 0.75
        }
      })
    });

    const blob = await response.blob();
    const url = URL.createObjectURL(blob);
    setAudioUrl(url);
    setLoading(false);
  };

  return (
    <div className="max-w-2xl mx-auto p-6 space-y-4">
      <Card>
        <CardContent className="space-y-4">
          <Textarea
            placeholder="Yahan apna text likhein..."
            rows={4}
            value={text}
            onChange={(e) => setText(e.target.value)}
          />
          <Button onClick={handleGenerate} disabled={loading}>
            {loading ? "Generating..." : "Generate Speech"}
          </Button>
          {audioUrl && (
            <audio controls src={audioUrl} className="w-full mt-4" />
          )}
        </CardContent>
      </Card>
    </div>
  );
}
